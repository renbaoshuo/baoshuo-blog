importScripts("https://cdn.jsdelivr.net/npm/workbox-cdn@5.1.3/workbox/workbox-sw.js");workbox.setConfig({modulePathPrefix:"https://cdn.jsdelivr.net/npm/workbox-cdn@5.1.3/workbox/"});console.log("Successful registered service worker.");let cacheSuffixVersion="-210321";const maxEntries=500;workbox.core.setCacheNameDetails({prefix:"baoshuo-blog",suffix:cacheSuffixVersion});workbox.core.skipWaiting();workbox.core.clientsClaim();workbox.precaching.cleanupOutdatedCaches();workbox.precaching.precacheAndRoute([{url:"https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/disqus.js",revision:null},{url:"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css",revision:null},{url:"https://cdn.jsdelivr.net/npm/cfga@1.0.3/cfga.min.js",revision:null},{url:"https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js",revision:null},{url:"https://cdn.jsdelivr.net/npm/@nishanths/zoom.js@3.1.0/dist/zoom.min.js",revision:null}]);workbox.routing.registerRoute(new RegExp("^https://cdn\\.jsdelivr\\.net"),new workbox.strategies.CacheFirst({cacheName:"static-immutable"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"},plugins:[new workbox.expiration.ExpirationPlugin({maxAgeSeconds:30*24*60*60,purgeOnQuotaError:true})]}));workbox.routing.registerRoute(new RegExp("^https://api\\.baoshuo\\.ren/cfga/(.*)"),new workbox.strategies.NetworkOnly({plugins:[new workbox.backgroundSync.BackgroundSyncPlugin("Optical_Collect",{maxRetentionTime:12*60})]}));workbox.routing.registerRoute(new RegExp("^https://api\\.baoshuo\\.ren/disqus/(.*)"),new workbox.strategies.NetworkFirst({cacheName:"dsqjs-api"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"},networkTimeoutSeconds:3}));workbox.routing.registerRoute(new RegExp("^https://(.*)disqus\\.com"),new workbox.strategies.NetworkOnly);workbox.routing.registerRoute(new RegExp("^https://(.*)disquscdn\\.com(.*)"),new workbox.strategies.CacheFirst({cacheName:"disqus-cdn-cache"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"},plugins:[new workbox.expiration.ExpirationPlugin({maxAgeSeconds:10*24*60*60}),new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]})]}));workbox.routing.registerRoute(new RegExp("^https://friends\\.baoshuo\\.ren(.*)(png|jpg|jpeg|svg|gif)"),new workbox.strategies.StaleWhileRevalidate({cacheName:"img-cache"+cacheSuffixVersion,fetchOptions:{mode:"cors",credentials:"omit"}}));workbox.routing.registerRoute(new RegExp("https://friends\\.baoshuo\\.ren/links.json"),new workbox.strategies.StaleWhileRevalidate);workbox.routing.registerRoute(new RegExp("^https://(?:i|vip[0-9])\\.loli\\.(?:io|net)"),new workbox.strategies.CacheFirst({cacheName:"img-cache"+cacheSuffixVersion,plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:maxEntries,maxAgeSeconds:30*24*60*60}),new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]})],fetchOptions:{mode:"cors",credentials:"omit"}}));workbox.routing.registerRoute(new RegExp("^https://(?:fonts\\.googleapis\\.com|fonts\\.gstatic\\.com)"),new workbox.strategies.CacheFirst({cacheName:"font-cache"+cacheSuffixVersion,plugins:[new workbox.expiration.ExpirationPlugin({maxEntries:maxEntries,maxAgeSeconds:30*24*60*60}),new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]})]}));workbox.routing.registerRoute(new RegExp(".*.(?:png|jpg|jpeg|svg|gif|webp)"),new workbox.strategies.StaleWhileRevalidate);workbox.routing.registerRoute(new RegExp(".*.(css|js)"),new workbox.strategies.StaleWhileRevalidate);workbox.routing.registerRoute("/sw.js",new workbox.strategies.StaleWhileRevalidate);workbox.routing.setDefaultHandler(new workbox.strategies.NetworkFirst({networkTimeoutSeconds:3}));