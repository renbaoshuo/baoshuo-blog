<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.baoshuo.ren</id>
    <title>宝硕博客 • Posts by &#34;随笔&#34; tag</title>
    <link href="https://blog.baoshuo.ren" />
    <updated>2020-11-28T13:39:32.000Z</updated>
    <category term="随笔" />
    <category term="CTF" />
    <category term="Git" />
    <category term="网络" />
    <category term="折腾" />
    <category term="题解" />
    <category term="OI" />
    <category term="笔记" />
    <category term="游记" />
    <category term="黑苹果" />
    <category term="Linux" />
    <entry>
        <id>https://blog.baoshuo.ren/post/download-smms-image/</id>
        <title>【随笔】下载自己在 SM.MS 图床上的所有图片</title>
        <link rel="alternate" href="https://blog.baoshuo.ren/post/download-smms-image/"/>
        <content type="html">&lt;p&gt;前提条件：有 SM.MS 图床账号，并且图片存储在该账号下。&lt;/p&gt;
&lt;p&gt;思路：先请求API，获取图片列表。遍历列表，判断本地是否存在该图片，若不存在则下载该图片。&lt;/p&gt;
&lt;p&gt;代码如下。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;hljs python&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; requests
&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; os
&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; json
&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; pathlib
&lt;span class=&#34;hljs-keyword&#34;&gt;import&lt;/span&gt; sys

&lt;span class=&#34;hljs-function&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;hljs-title&#34;&gt;getUploadedImages&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;token&lt;/span&gt;) -&amp;gt; str:&lt;/span&gt;
    url = &lt;span class=&#34;hljs-string&#34;&gt;&#34;https://sm.ms/api/v2/upload_history&#34;&lt;/span&gt;
    headers = {&lt;span class=&#34;hljs-string&#34;&gt;&#34;Authorization&#34;&lt;/span&gt;: token}
    &lt;span class=&#34;hljs-keyword&#34;&gt;return&lt;/span&gt; requests.get(url, headers=headers).text

data = json.loads(getUploadedImages(sys.argv[&lt;span class=&#34;hljs-number&#34;&gt;1&lt;/span&gt;]))

&lt;span class=&#34;hljs-keyword&#34;&gt;for&lt;/span&gt; img &lt;span class=&#34;hljs-keyword&#34;&gt;in&lt;/span&gt; data[&lt;span class=&#34;hljs-string&#34;&gt;&#34;data&#34;&lt;/span&gt;]:
    path = &lt;span class=&#34;hljs-string&#34;&gt;&#34;./data/&#34;&lt;/span&gt; + img[&lt;span class=&#34;hljs-string&#34;&gt;&#34;storename&#34;&lt;/span&gt;]
    &lt;span class=&#34;hljs-keyword&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;hljs-keyword&#34;&gt;not&lt;/span&gt; pathlib.Path(path).is_file():
        pic = requests.get(img[&lt;span class=&#34;hljs-string&#34;&gt;&#34;url&#34;&lt;/span&gt;]).content
        f = &lt;span class=&#34;hljs-built_in&#34;&gt;open&lt;/span&gt;(path, &lt;span class=&#34;hljs-string&#34;&gt;&#34;wb&#34;&lt;/span&gt;)
        f.write(pic)
        f.close()
        &lt;span class=&#34;hljs-keyword&#34;&gt;del&lt;/span&gt; pic
        print(&lt;span class=&#34;hljs-string&#34;&gt;&#34;Successfully get &#34;&lt;/span&gt;+img[&lt;span class=&#34;hljs-string&#34;&gt;&#34;storename&#34;&lt;/span&gt;]+&lt;span class=&#34;hljs-string&#34;&gt;&#34; .&#34;&lt;/span&gt;)
    &lt;span class=&#34;hljs-keyword&#34;&gt;else&lt;/span&gt;:
        print(&lt;span class=&#34;hljs-string&#34;&gt;&#34;&#34;&lt;/span&gt;+img[&lt;span class=&#34;hljs-string&#34;&gt;&#34;storename&#34;&lt;/span&gt;]+&lt;span class=&#34;hljs-string&#34;&gt;&#34; is already exists.&#34;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用方法：&lt;code&gt;python3 smms-image.py &#34;[your token here]&#34;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;下载下来的图片会存到 &lt;code&gt;./data/&lt;/code&gt; 目录下（请提前新建）。&lt;/p&gt;
</content>
        <category term="随笔" />
        <updated>2020-11-28T13:39:32.000Z</updated>
    </entry>
    <entry>
        <id>https://blog.baoshuo.ren/post/change-git-submission-email/</id>
        <title>【随笔】批量修改 Git 仓库的提交邮箱</title>
        <link rel="alternate" href="https://blog.baoshuo.ren/post/change-git-submission-email/"/>
        <content type="html">&lt;p&gt;这几天重装了系统，一个不小心提交了好多 author 为 &lt;code&gt;&#34;root&#34;&amp;lt;root@localhost&amp;gt;&lt;/code&gt; 的 commit ，于是寻找到了一个修改的方法。&lt;/p&gt;
&lt;p&gt;在仓库根目录下新建一个名为 &lt;code&gt;fix.sh&lt;/code&gt; 的 shell 脚本，输入以下内容：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;&lt;span class=&#34;hljs-meta&#34;&gt;#!/bin/bash&lt;/span&gt;
 
git filter-branch --env-filter &lt;span class=&#34;hljs-string&#34;&gt;&#39;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;an=&#34;$GIT_AUTHOR_NAME&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;am=&#34;$GIT_AUTHOR_EMAIL&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;cn=&#34;$GIT_COMMITTER_NAME&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;cm=&#34;$GIT_COMMITTER_EMAIL&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt; &lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;if [ &#34;$GIT_COMMITTER_EMAIL&#34; = &#34;错误邮箱&#34; ]&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;then&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;    cn=&#34;正确名称&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;    cm=&#34;正确邮箱&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;fi&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;if [ &#34;$GIT_AUTHOR_EMAIL&#34; = &#34;错误邮箱&#34; ]&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;then&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;    an=&#34;正确名称&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;    am=&#34;正确邮箱&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;fi&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;export GIT_AUTHOR_NAME=&#34;$an&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;export GIT_AUTHOR_EMAIL=&#34;$am&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;export GIT_COMMITTER_NAME=&#34;$cn&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;export GIT_COMMITTER_EMAIL=&#34;$cm&#34;&lt;/span&gt;
&lt;span class=&#34;hljs-string&#34;&gt;&#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;完成后运行 &lt;code&gt;./fix.sh&lt;/code&gt; 即可。&lt;/p&gt;
&lt;p&gt;PS: 跑完记得删脚本，或者直接把脚本内容改好之后拖进终端&lt;/p&gt;
</content>
        <category term="随笔" />
        <category term="Git" />
        <updated>2020-11-25T12:03:03.000Z</updated>
    </entry>
    <entry>
        <id>https://blog.baoshuo.ren/post/wsl2-network/</id>
        <title>【随笔】WSL2的网络访问问题</title>
        <link rel="alternate" href="https://blog.baoshuo.ren/post/wsl2-network/"/>
        <content type="html">&lt;p&gt;在使用WSL2的时候，由于某些原因，经常需要使用代理，然而网上的各种教程都并不适合我的情况，甚至还搞炸了我的电脑（最后重装了系统）…&lt;/p&gt;
&lt;p&gt;前提条件：安装了 Docker Desktop 。&lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;/etc/wsl.conf&lt;/code&gt; 中写入以下内容：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;hljs ini&#34;&gt;&lt;span class=&#34;hljs-section&#34;&gt;[network]&lt;/span&gt;
&lt;span class=&#34;hljs-attr&#34;&gt;generateHosts&lt;/span&gt; = &lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;
&lt;span class=&#34;hljs-attr&#34;&gt;generateResolvConf&lt;/span&gt; = &lt;span class=&#34;hljs-literal&#34;&gt;true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;重启系统，在 WSL 中运行 &lt;code&gt;cat /etc/hosts&lt;/code&gt; ，会出现如下图所示的内容：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://vip2.loli.net/2020/12/13/NMjyJqPa7ucG9Er.png&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;此时使用 &lt;code&gt;http://host.docker.internal:7890&lt;/code&gt; 连接代理即可。&lt;/p&gt;
</content>
        <category term="随笔" />
        <updated>2020-11-22T12:04:04.000Z</updated>
    </entry>
</feed>
